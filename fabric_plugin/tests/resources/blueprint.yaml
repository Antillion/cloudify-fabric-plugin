imports:
    #- http://www.getcloudify.org/spec/cloudify/3.1/types.yaml
    - file:///home/dan/dev/cloudify/cloudify-manager/resources/rest-service/cloudify/types/types.yaml

plugins:
    fabric:
        derived_from: cloudify.plugins.manager_plugin

inputs:

    tasks_file:
        default: fabric_tasks.py

    fabric_env:
        default:
            user: vagrant
            key_filename: /home/dan/.vagrant.d/insecure_private_key
            host_string: 11.0.0.7


node_types:
    fabric_type:
        derived_from: cloudify.types.base

node_templates:
    node:
        type: fabric_type
        interfaces:
            cloudify.interfaces.lifecycle:
                - start:
                    mapping: fabric.fabric_plugin.tasks.run_task
                    properties:
                        task_name: task
                        tasks_file: { get_input: tasks_file }
                        fabric_env: { get_input: fabric_env }
