imports:
    #- http://www.getcloudify.org/spec/cloudify/3.1/types.yaml
    - file:///home/dan/dev/cloudify/cloudify-manager/resources/rest-service/cloudify/types/types.yaml

plugins:
    fabric:
        derived_from: cloudify.plugins.manager_plugin

inputs:
    fabric_env: {}
    task_name: {}
    commands: {}

node_templates:
    node:
        type: cloudify.types.base
        interfaces:
            cloudify.interfaces.lifecycle:
                - create:
                    mapping: fabric.fabric_plugin.tasks.run_commands
                    properties:
                        commands: { get_input: commands }
                        fabric_env: { get_input: fabric_env }
                - start:
                    mapping: fabric.fabric_plugin.tasks.run_task
                    properties:
                        tasks_file: fabric_tasks.py
                        task_name: { get_input: task_name }
                        fabric_env: { get_input: fabric_env }
