inputs:
    fabric_env:      {}
    commands:        {}
    task_name:       {}
    tasks_file:      {}
    task_properties: {}
    task_mapping:    {}

node_templates:
    test:
        type: test
        interfaces:
            test:
                - run_commands:
                    mapping: fabric.fabric_plugin.tasks.run_commands
                    properties:
                        commands:   { get_input: commands   }
                        fabric_env: { get_input: fabric_env }
                - run_task:
                    mapping: fabric.fabric_plugin.tasks.run_task
                    properties:
                        tasks_file:      { get_input: tasks_file }
                        task_name:       { get_input: task_name  }
                        task_properties: { get_input: task_properties }
                        fabric_env:      { get_input: fabric_env }
                - run_module_task:
                    mapping: fabric.fabric_plugin.tasks.run_module_task
                    properties:
                        task_mapping:    { get_input: task_mapping }
                        task_properties: { get_input: task_properties }
                        fabric_env:      { get_input: fabric_env }


workflows:
    execute_operation:
        mapping: fabric.fabric_plugin.tests.tests.execute_operation
        parameters: { operation: {} }

plugins:
    fabric:
        derived_from: cloudify.plugins.manager_plugin

node_types: { test: {} }
